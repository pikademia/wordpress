var WCPT_Block_Editor={};!function($){WCPT_Block_Editor={$elm:$(),Config:{add_element_partial:"add-common-element",add_row:!0,connect_with:".wcpt-block-editor-row",delete_row:!0},Ctrl:{},View:{},Model:{},init:function(elm,options){this.view=Object.create(WCPT_Block_Editor.View),this.model=Object.create(WCPT_Block_Editor.Model),this.ctrl=Object.create(WCPT_Block_Editor.Ctrl),this.config=Object.create(WCPT_Block_Editor.Config),this.view.parent=this,this.model.parent=this,this.ctrl.parent=this,this.$elm=$(elm),this.$elm.data("wcpt_block_editor",this),this.$elm.addClass("wcpt-block-editor"),options?$.extend(!0,this.config,options):(this.$elm.attr("wcpt-be-add-element-partial")&&(this.config.add_element_partial=this.$elm.attr("wcpt-be-add-element-partial")),this.config.add_row=!!parseInt(this.$elm.attr("wcpt-be-add-row")),"string"==this.$elm.attr("wcpt-be-delete-row")==="0"&&(this.config.delete_row=!1),this.$elm.attr("wcpt-be-connect-with")&&(this.config.connect_with=this.$elm.attr("wcpt-be-connect-with"))),this.$elm.on("click",".wcpt-block-editor-add-row",this.ctrl.add_row),this.$elm.on("sortupdate",this.ctrl.sort_update),this.$elm.on("click",".wcpt-element-block",this.ctrl.edit_element),this.$elm.on("click",".wcpt-block-editor-add-element",this.ctrl.add_element),this.$elm.on("click",".wcpt-block-editor-edit-row",this.ctrl.edit_row),this.$elm.on("click",".wcpt-block-editor-delete-row",this.ctrl.delete_row);var data=!1;this.$elm.data("wcpt-data")&&(data=this.$elm.data("wcpt-data")),this.config.data&&(data=$.extend(!0,{},this.config.data)),"string"==typeof data&&(data=[{id:Date.now(),style:{},elements:[{type:"text",text:data}]}]),"object"!=typeof data&&(data=[{id:Date.now(),style:{},condition:{},elements:[]}]),this.model.set_data(data)}},$.fn.wcpt_block_editor=function(options){return this.each((function(){var block_editor;$(this).data("wcpt_block_editor")||Object.create(WCPT_Block_Editor).init(this,options)}))}}(jQuery);